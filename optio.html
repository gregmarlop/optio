<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Optio - Layered encryption system">
    <title>OPTIO</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            min-height: 100vh;
            background: #000;
            font-family: 'IBM Plex Mono', 'Courier New', monospace;
            font-size: 14px;
            color: #fff;
            line-height: 1.4;
            padding: 20px;
        }
        .container {
            max-width: 700px;
            margin: 0 auto;
        }
        
        /* ASCII LOGO */
        .ascii-logo {
            text-align: center;
            margin-bottom: 8px;
            white-space: pre;
            font-size: 10px;
            line-height: 1.1;
            letter-spacing: 0;
        }
        .version-line {
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            margin-bottom: 16px;
            font-size: 12px;
        }
        
        /* BOX STYLES */
        .box {
            border: 1px solid #fff;
            margin-bottom: 16px;
        }
        .box-header {
            text-align: center;
            padding: 12px;
            border-bottom: 1px solid #fff;
        }
        .box-title {
            font-size: 13px;
        }
        .box-content {
            padding: 12px 16px;
        }
        
        /* INFO GRID */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
        }
        .info-left {
            padding: 10px 16px;
            border-right: 1px solid #fff;
        }
        .info-right {
            padding: 10px 16px;
        }
        .info-line {
            margin-bottom: 2px;
            font-size: 13px;
        }
        
        /* SECTION */
        .section {
            margin-bottom: 20px;
        }
        .section-title {
            margin-bottom: 4px;
            font-size: 13px;
        }
        .section-underline {
            color: #888;
            margin-bottom: 8px;
            font-size: 13px;
        }
        .section-text {
            font-size: 13px;
            line-height: 1.5;
        }
        
        /* PANELS */
        .panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }
        @media (max-width: 600px) {
            .panels {
                grid-template-columns: 1fr;
            }
        }
        .panel {
            border: 1px solid #fff;
        }
        .panel-header {
            text-align: center;
            padding: 8px;
            border-bottom: 1px solid #fff;
            font-size: 13px;
        }
        .panel-content {
            padding: 12px;
        }
        
        /* FORM */
        .form-group {
            margin-bottom: 10px;
        }
        .form-label {
            display: block;
            font-size: 11px;
            color: #888;
            margin-bottom: 4px;
        }
        input[type="text"],
        textarea {
            width: 100%;
            padding: 6px 8px;
            font-family: inherit;
            font-size: 13px;
            background: #000;
            border: 1px solid #555;
            color: #fff;
        }
        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: #fff;
        }
        input[type="text"]::placeholder,
        textarea::placeholder {
            color: #555;
        }
        textarea {
            min-height: 60px;
            resize: vertical;
        }
        .key-input {
            text-align: center;
            letter-spacing: 0.15em;
        }
        
        /* BUTTON */
        button[type="submit"] {
            width: 100%;
            padding: 6px 12px;
            font-family: inherit;
            font-size: 12px;
            background: #fff;
            color: #000;
            border: none;
            cursor: pointer;
            margin-top: 4px;
        }
        button[type="submit"]:hover {
            background: #ccc;
        }
        
        /* OUTPUT */
        .output-section {
            margin-top: 12px;
            padding-top: 10px;
            border-top: 1px solid #555;
        }
        .output-section[hidden] {
            display: none;
        }
        .output-label {
            font-size: 11px;
            color: #888;
            margin-bottom: 6px;
        }
        .output-wrapper {
            position: relative;
        }
        .output-area {
            padding: 8px;
            background: #111;
            border: 1px solid #333;
            font-size: 11px;
            word-break: break-all;
            min-height: 40px;
        }
        .output-area.revealed {
            font-size: 13px;
        }
        .copy-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            padding: 2px 6px;
            font-family: inherit;
            font-size: 10px;
            background: #333;
            color: #888;
            border: 1px solid #555;
            cursor: pointer;
        }
        .copy-btn:hover {
            color: #fff;
            border-color: #888;
        }
        
        /* GREETS */
        .greets {
            text-align: center;
            margin: 24px 0;
        }
        .greets-title {
            font-size: 13px;
            margin-bottom: 4px;
        }
        .greets-underline {
            color: #888;
            margin-bottom: 8px;
            font-size: 13px;
        }
        .greets-text {
            font-size: 12px;
            color: #fff;
        }
        .greets-url {
            margin-top: 8px;
            font-size: 12px;
            color: #fff;
        }
        
        /* ASCII ART SMALL */
        .ascii-small {
            text-align: center;
            margin: 20px 0;
            font-size: 11px;
            line-height: 1.2;
            white-space: pre;
        }
        
        /* FOOTER */
        .footer {
            text-align: center;
            padding: 16px;
            border-top: 1px solid #fff;
            border-bottom: 1px solid #fff;
            font-size: 11px;
        }
        .footer-line {
            margin-bottom: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <pre class="ascii-logo">
 ▒█████   ██▓███  ▄▄▄█████▓ ██▓ ▒█████  
▒██▒  ██▒▓██░  ██▒▓  ██▒ ▓▒▓██▒▒██▒  ██▒
▒██░  ██▒▓██░ ██▓▒▒ ▓██░ ▒░▒██▒▒██░  ██▒
▒██   ██░▒██▄█▓▒ ▒░ ▓██▓ ░ ░██░▒██   ██░
░ ████▓▒░▒██▒ ░  ░  ▒██▒ ░ ░██░░ ████▓▒░
░ ▒░▒░▒░ ▒▓▒░ ░  ░  ▒ ░░   ░▓  ░ ▒░▒░▒░ 
  ░ ▒ ▒░ ░▒ ░       ░       ▒ ░  ░ ▒ ▒░ 
░ ░ ░ ▒  ░░       ░         ▒ ░░ ░ ░ ▒  
    ░ ░                     ░      ░ ░  
</pre>

        <div class="version-line">
            <span>v 1.0</span>
            <span>&lt;2026&gt;</span>
        </div>

        <div class="box">
            <div class="box-header">
                <div class="box-title">Optio proudly presents:</div>
                <div class="box-title">Layered Encryption System</div>
            </div>
            <div class="info-grid">
                <div class="info-left">
                    <div class="info-line">Layers : 12 Ciphers</div>
                    <div class="info-line">Type   : Symmetric</div>
                    <div class="info-line">Storage: Local Only</div>
                </div>
                <div class="info-right">
                    <div class="info-line">Combinations: 479,001,600</div>
                    <div class="info-line">Server Calls: None</div>
                    <div class="info-line">Tracking    : None</div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">About</div>
            <div class="section-underline">~~~~~</div>
            <div class="section-text">
                A layered encryption system combining 12 ancestral cipher methods
                (Caesar, Atbash, Vigenère, Beaufort, Porta, Trithemius, Substitution,
                Alberti, Bifurcation, Rail Fence, Rotation, Inversion) in a unique
                sequence derived from your secret key. Each key produces one of
                479 million possible cipher combinations.
            </div>
        </div>

        <div class="section">
            <div class="section-title">How It Works</div>
            <div class="section-underline">~~~~~~~~~~~~</div>
            <div class="section-text">
                1. Enter a shared secret key (minimum 2 characters)<br>
                2. Type or paste your message<br>
                3. Click SEAL to encrypt or REVEAL to decrypt<br>
                4. Share the ciphertext through any channel<br>
                5. Recipient uses same key to reveal the message
            </div>
        </div>

        <div class="panels">
            <div class="panel">
                <div class="panel-header">[+] SEAL</div>
                <div class="panel-content">
                    <form id="form-encrypt">
                        <div class="form-group">
                            <label class="form-label">SECRET KEY:</label>
                            <input type="text" id="key-encrypt" class="key-input" placeholder="enter key" autocomplete="off" required minlength="2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">PLAINTEXT:</label>
                            <textarea id="message-original" placeholder="message to encrypt..." required></textarea>
                        </div>
                        <button type="submit">> EXECUTE SEAL</button>
                    </form>
                    <div class="output-section" id="output-encrypt" hidden>
                        <div class="output-label">OUTPUT:</div>
                        <div class="output-wrapper">
                            <div id="result-encrypted" class="output-area"></div>
                            <button type="button" class="copy-btn" data-copy="result-encrypted">COPY</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">[-] REVEAL</div>
                <div class="panel-content">
                    <form id="form-decrypt">
                        <div class="form-group">
                            <label class="form-label">SECRET KEY:</label>
                            <input type="text" id="key-decrypt" class="key-input" placeholder="enter key" autocomplete="off" required minlength="2">
                        </div>
                        <div class="form-group">
                            <label class="form-label">CIPHERTEXT:</label>
                            <textarea id="message-encrypted" placeholder="paste encrypted message..." required></textarea>
                        </div>
                        <button type="submit">> EXECUTE REVEAL</button>
                    </form>
                    <div class="output-section" id="output-decrypt" hidden>
                        <div class="output-label">OUTPUT:</div>
                        <div class="output-wrapper">
                            <div id="result-decrypted" class="output-area revealed"></div>
                            <button type="button" class="copy-btn" data-copy="result-decrypted">COPY</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="greets">
            <div class="greets-text">To all who value privacy in the digital age.</div>
            <div class="greets-url">https://github.com/gregmarlop/optio</div>
        </div>
    </div>

    <script>
    (function() {
        'use strict';
        
        const AU = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const AL = 'abcdefghijklmnopqrstuvwxyz';
        const A = AU + AL;

        function rng(s) {
            s = s >>> 0 || 1;
            return function() {
                s = (s + 0x6D2B79F5) >>> 0;
                let t = Math.imul(s ^ (s >>> 15), s | 1);
                t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
                return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
            };
        }

        function seed(k) {
            let h = 0;
            for (let i = 0; i < k.length; i++) {
                h = ((h << 5) - h + k.charCodeAt(i)) >>> 0;
            }
            return h || 1;
        }

        function caesar(t, sh, inv) {
            const d = inv ? -sh : sh;
            return t.split('').map(function(c) {
                let i = AU.indexOf(c);
                if (i !== -1) return AU[(i + d + 26) % 26];
                i = AL.indexOf(c);
                if (i !== -1) return AL[(i + d + 26) % 26];
                return c;
            }).join('');
        }

        function atbash(t) {
            return t.split('').map(function(c) {
                let i = AU.indexOf(c);
                if (i !== -1) return AU[25 - i];
                i = AL.indexOf(c);
                if (i !== -1) return AL[25 - i];
                return c;
            }).join('');
        }

        function vigenere(t, k, inv) {
            let ki = 0;
            return t.split('').map(function(c) {
                let i = AU.indexOf(c), b = AU;
                if (i === -1) { i = AL.indexOf(c); b = AL; }
                if (i === -1) return c;
                const sh = AU.indexOf(k[ki++ % k.length].toUpperCase());
                if (sh === -1) return c;
                return b[(i + (inv ? -sh : sh) + 26) % 26];
            }).join('');
        }

        function beaufort(t, k) {
            let ki = 0;
            return t.split('').map(function(c) {
                let i = AU.indexOf(c), b = AU;
                if (i === -1) { i = AL.indexOf(c); b = AL; }
                if (i === -1) return c;
                const ki2 = AU.indexOf(k[ki++ % k.length].toUpperCase());
                if (ki2 === -1) return c;
                return b[(ki2 - i + 26) % 26];
            }).join('');
        }

        function porta(t, k, inv) {
            return vigenere(t, k + 'abc', inv);
        }

        function trithemius(t, inv) {
            return t.split('').map(function(c, i) {
                let idx = AU.indexOf(c);
                if (idx !== -1) return AU[(idx + (inv ? -i : i) + 2600) % 26];
                idx = AL.indexOf(c);
                if (idx !== -1) return AL[(idx + (inv ? -i : i) + 2600) % 26];
                return c;
            }).join('');
        }

        function substitution(t, s, inv) {
            const r = rng(s);
            const ch = A.split('');
            for (let i = ch.length - 1; i > 0; i--) {
                const j = Math.floor(r() * (i + 1));
                const temp = ch[i]; ch[i] = ch[j]; ch[j] = temp;
            }
            if (!inv) {
                return t.split('').map(function(c) {
                    const i = A.indexOf(c);
                    return i !== -1 ? ch[i] : c;
                }).join('');
            }
            return t.split('').map(function(c) {
                const i = ch.indexOf(c);
                return i !== -1 ? A[i] : c;
            }).join('');
        }

        function alberti(t, s, inv) {
            const r = rng(s);
            const sh1 = 1 + Math.floor(r() * 25);
            const sh2 = 1 + Math.floor(r() * 25);
            const p = Math.floor(t.length * (0.3 + r() * 0.4));
            return caesar(t.slice(0, p), sh1, inv) + caesar(t.slice(p), sh2, inv);
        }

        function bifurcation(t, s, inv) {
            const r = rng(s);
            const sh1 = 1 + Math.floor(r() * 25);
            const sh2 = 1 + Math.floor(r() * 25);
            const mid = Math.floor(t.length / 2);
            return caesar(t.slice(0, mid), sh1, inv) + caesar(t.slice(mid), sh2, inv);
        }

        function railFence(t, rails, inv) {
            if (rails < 2) rails = 2;
            if (!inv) {
                const f = [];
                for (let i = 0; i < rails; i++) f.push([]);
                let rail = 0, dir = 1;
                for (let i = 0; i < t.length; i++) {
                    f[rail].push(t[i]);
                    rail += dir;
                    if (rail === 0 || rail === rails - 1) dir *= -1;
                }
                return f.flat().join('');
            } else {
                const len = t.length;
                const pat = [];
                let rail = 0, dir = 1;
                for (let i = 0; i < len; i++) {
                    pat.push(rail);
                    rail += dir;
                    if (rail === 0 || rail === rails - 1) dir *= -1;
                }
                const cnt = new Array(rails).fill(0);
                pat.forEach(function(r) { cnt[r]++; });
                const f = [];
                for (let i = 0; i < rails; i++) f.push([]);
                let idx = 0;
                for (let r = 0; r < rails; r++) {
                    for (let i = 0; i < cnt[r]; i++) f[r].push(t[idx++]);
                }
                const ind = new Array(rails).fill(0);
                let res = '';
                for (let i = 0; i < pat.length; i++) {
                    res += f[pat[i]][ind[pat[i]]++];
                }
                return res;
            }
        }

        function rotation(t, s, inv) {
            const r = rng(s);
            const bs = 3 + Math.floor(r() * 4);
            const bl = [];
            for (let i = 0; i < t.length; i += bs) bl.push(t.slice(i, i + bs));
            return bl.map(function(b, i) {
                const rot = Math.floor(rng(s + i)() * b.length);
                const x = inv ? (b.length - rot) % b.length : rot;
                return b.slice(x) + b.slice(0, x);
            }).join('');
        }

        function inversion(t, s) {
            const r = rng(s);
            const bs = 2 + Math.floor(r() * 3);
            const bl = [];
            for (let i = 0; i < t.length; i += bs) bl.push(t.slice(i, i + bs));
            return bl.map(function(b, i) {
                return rng(s + i * 1000)() > 0.5 ? b.split('').reverse().join('') : b;
            }).join('');
        }

        const M = [
            { f: function(t, p, i) { return caesar(t, p.c1, i); }, p: function(r) { return { c1: 1 + Math.floor(r() * 25) }; } },
            { f: function(t) { return atbash(t); } },
            { f: function(t, p, i, c) { return vigenere(t, c, i); } },
            { f: function(t, p, i, c) { return beaufort(t, c); } },
            { f: function(t, p, i, c) { return porta(t, c, i); } },
            { f: function(t, p, i) { return trithemius(t, i); } },
            { f: function(t, p, i) { return substitution(t, p.s1, i); }, p: function(r) { return { s1: Math.floor(r() * 1e6) }; } },
            { f: function(t, p, i) { return alberti(t, p.a1, i); }, p: function(r) { return { a1: Math.floor(r() * 1e6) }; } },
            { f: function(t, p, i) { return bifurcation(t, p.b1, i); }, p: function(r) { return { b1: Math.floor(r() * 1e6) }; } },
            { f: function(t, p, i) { return railFence(t, p.rf, i); }, p: function(r) { return { rf: 2 + Math.floor(r() * 4) }; } },
            { f: function(t, p, i) { return rotation(t, p.ro, i); }, p: function(r) { return { ro: Math.floor(r() * 1e6) }; } },
            { f: function(t, p) { return inversion(t, p.iv); }, p: function(r) { return { iv: Math.floor(r() * 1e6) }; } }
        ];

        function encrypt(key, message) {
            const s = seed(key);
            const r = rng(s);
            const params = {};
            M.forEach(function(m) { if (m.p) Object.assign(params, m.p(r)); });
            const order = M.slice();
            for (let i = order.length - 1; i > 0; i--) {
                const j = Math.floor(r() * (i + 1));
                const temp = order[i]; order[i] = order[j]; order[j] = temp;
            }
            let res = message;
            for (let i = 0; i < order.length; i++) {
                res = order[i].f(res, params, false, key);
            }
            return btoa(unescape(encodeURIComponent(res)));
        }

        function decrypt(key, encrypted) {
            let res;
            try {
                res = decodeURIComponent(escape(atob(encrypted)));
            } catch (e) {
                return null;
            }
            const s = seed(key);
            const r = rng(s);
            const params = {};
            M.forEach(function(m) { if (m.p) Object.assign(params, m.p(r)); });
            const order = M.slice();
            for (let i = order.length - 1; i > 0; i--) {
                const j = Math.floor(r() * (i + 1));
                const temp = order[i]; order[i] = order[j]; order[j] = temp;
            }
            for (let i = order.length - 1; i >= 0; i--) {
                res = order[i].f(res, params, true, key);
            }
            return res;
        }

        document.getElementById('form-encrypt').addEventListener('submit', function(e) {
            e.preventDefault();
            const key = document.getElementById('key-encrypt').value.trim();
            const message = document.getElementById('message-original').value;
            if (key.length < 2) {
                alert('ERROR: Key must be >= 2 characters');
                return;
            }
            const result = encrypt(key, message);
            document.getElementById('result-encrypted').textContent = result;
            document.getElementById('output-encrypt').hidden = false;
        });

        document.getElementById('form-decrypt').addEventListener('submit', function(e) {
            e.preventDefault();
            const key = document.getElementById('key-decrypt').value.trim();
            const encrypted = document.getElementById('message-encrypted').value.trim();
            if (key.length < 2) {
                alert('ERROR: Key must be >= 2 characters');
                return;
            }
            const result = decrypt(key, encrypted);
            if (result === null) {
                alert('ERROR: Invalid ciphertext');
                return;
            }
            document.getElementById('result-decrypted').textContent = result;
            document.getElementById('output-decrypt').hidden = false;
        });

        document.addEventListener('click', function(e) {
            if (e.target.matches('.copy-btn')) {
                const targetId = e.target.getAttribute('data-copy');
                const text = document.getElementById(targetId).textContent;
                navigator.clipboard.writeText(text).then(function() {
                    const original = e.target.textContent;
                    e.target.textContent = 'OK!';
                    setTimeout(function() { e.target.textContent = original; }, 1500);
                });
            }
        });
    })();
    </script>
</body>
</html>
